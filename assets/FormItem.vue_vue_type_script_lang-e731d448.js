var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var E=(e,s,m)=>s in e?Z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:m}):e[s]=m,f=(e,s)=>{for(var m in s||(s={}))se.call(s,m)&&E(e,m,s[m]);if($)for(var m of $(s))ne.call(s,m)&&E(e,m,s[m]);return e},G=(e,s)=>ee(e,te(s));import{c as F,u as r,d as oe,G as re,n as ae,l as g,i as le,z as ce,ac as H,E as ie}from"./vue-ea98dac5.js";import{c as J}from"./componentMap-72b605b4.js";import{k as Y,s as Q,m as x,R as N,x as z,a1 as ue,a2 as de}from"./index.js";import{O as U,a1 as fe,$ as me,d as he,k as pe}from"./antd-5dd6c6b2.js";const{t:W}=Y();function K(e){return e.includes("Input")||e.includes("Complete")?W("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?W("common.chooseText"):""}const be=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function ge(){return[...be,"RangePicker"]}function Pe(e,s,m){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(s)?e.type=m?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(s)?e.type="array":["InputNumber"].includes(s)&&(e.type="number")}function Se(e,s){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&s&&Q(s)?`${s}`:s}const Te=ge(),Re=["Input","InputPassword","InputSearch","InputTextArea"],Ce=["Upload","ApiTransfer","ApiTree","ApiSelect","ApiTreeSelect","ApiRadioGroup","ApiCascader","AutoComplete","RadioButtonGroup"];function ye(e,s){return F(()=>{const m=r(e),{labelCol:T={},wrapperCol:j={}}=m.itemProps||{},{labelWidth:D,disabledLabelWidth:p}=m,{labelWidth:A,labelCol:k,wrapperCol:L,layout:q}=r(s);if(!A&&!D&&!k||p)return T.style={textAlign:"left"},{labelCol:T,wrapperCol:j};let y=D||A;const O=f(f({},k),T),v=f(f({},L),j);return y&&(y=Q(y)?`${y}px`:y),{labelCol:f({style:{width:y}},O),wrapperCol:f({style:{width:q==="vertical"?"100%":`calc(100% - ${y})`}},v)}})}function B(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!le(e)}const Me=oe({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:s}){const{t:m}=Y(),{schema:T,formProps:j}=re(e),D=ye(T,j),p=F(()=>{const{allDefaultValues:n,formModel:t,schema:l}=e,{mergeDynamicData:c}=e.formProps;return{field:l.field,model:t,values:f(f(f({},c),n),t),schema:l}}),A=F(()=>{var a;const{schema:n,tableAction:t,formModel:l,formActionType:c}=e;let{componentProps:o={}}=n;return x(o)&&(o=(a=o({schema:n,tableAction:t,formModel:l,formActionType:c}))!=null?a:{}),n.component==="Divider"&&(o=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},o)),o}),k=F(()=>{const{disabled:n}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:l=!1}=r(A);let c=!!n||l;return N(t)&&(c=t),x(t)&&(c=t(r(p))),c});function L(){const{show:n,ifShow:t}=e.schema,{showAdvancedButton:l}=e.formProps,c=l&&N(e.isAdvanced)?e.isAdvanced:!0;let o=!0,a=!0;return N(n)&&(o=n),N(t)&&(a=t),x(n)&&(o=n(r(p))),x(t)&&(a=t(r(p))),o=o&&c,{isShow:o,isIfShow:a}}function q(){var M;const{rules:n=[],component:t,rulesMessageJoinLabel:l,label:c,dynamicRules:o,required:a}=e.schema;if(x(o))return o(r(p));let i=he(n);const{rulesMessageJoinLabel:w}=e.formProps,I=Reflect.has(e.schema,"rulesMessageJoinLabel")?l:w,C=K(t)+`${I?c:""}`;function b(d,u){const P=d.message||C;return u===void 0||de(u)||Array.isArray(u)&&u.length===0||typeof u=="string"&&u.trim()===""||typeof u=="object"&&Reflect.has(u,"checked")&&Reflect.has(u,"halfChecked")&&Array.isArray(u.checked)&&Array.isArray(u.halfChecked)&&u.checked.length===0&&u.halfChecked.length===0?Promise.reject(P):Promise.resolve()}const h=x(a)?a(r(p)):a;h&&(!i||i.length===0?i=[{required:h,validator:b}]:i.findIndex(u=>Reflect.has(u,"required"))===-1&&i.push({required:h,validator:b}));const R=i.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(R!==-1){const d=i[R],{isShow:u}=L();if(u||(d.required=!1),t){Reflect.has(d,"type")||(d.type=t==="InputNumber"?"number":"string"),d.message=d.message||C,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const P=(M=r(A))==null?void 0:M.valueFormat;Pe(d,t,P)}}const S=i.findIndex(d=>d.max);return S!==-1&&!i[S].validator&&(i[S].message=i[S].message||m("component.form.maxTip",[i[S].max])),i}function y(){var u;const{renderComponentContent:n,component:t,field:l,changeEvent:c="change",valueField:o}=e.schema,a=t&&["Switch","Checkbox"].includes(t),i=`on${pe(c)}`,w={[i]:(...P)=>{const[V]=P;h[i]&&h[i](...P);const _=V?V.target:null,X=_?a?_.checked:_.value:V;e.setFormModel(l,X,e.schema)}},I=J.get(t),{autoSetPlaceHolder:C,size:b}=e.formProps,h=G(f({allowClear:!0,getPopupContainer:P=>P.parentNode,size:b},r(A)),{disabled:r(k)});!h.disabled&&C&&t!=="RangePicker"&&t&&(h.placeholder=((u=r(A))==null?void 0:u.placeholder)||K(t)),h.codeField=l,h.formValues=r(p);const S={[o||(a?"checked":"value")]:e.formModel[l]},M=f(f(f({},h),w),S);if(!n)return g(I,M,null);const d=x(n)?f({},n(r(p),{disabled:r(k)})):{default:()=>n};return g(I,M,B(d)?d:{default:()=>[d]})}function O(){const{label:n,helpMessage:t,helpComponentProps:l,subLabel:c}=e.schema,o=c?g("span",null,[n,ie(" "),g("span",{class:"text-secondary"},[c])]):n,a=x(t)?t(r(p)):t;return!a||Array.isArray(a)&&a.length===0?o:g("span",null,[o,g(ue,H({placement:"top",class:"mx-1",text:a},l),null)])}function v(){const{itemProps:n,slot:t,render:l,field:c,suffix:o,component:a}=e.schema,{labelCol:i,wrapperCol:w}=r(D),{colon:I}=e.formProps,C={disabled:r(k)};if(a==="Divider"){let b;return g(U,{span:24},{default:()=>[g(fe,r(A),B(b=O())?b:{default:()=>[b]})]})}else{const b=()=>t?z(s,t,r(p),C):l?l(r(p),C):y(),h=!!o,R=x(o)?o(r(p)):o;return Ce.includes(a)&&e.schema&&(e.schema.itemProps=f({autoLink:!1},e.schema.itemProps)),g(me.Item,H({name:c,colon:I,class:{"suffix-item":h}},n,{label:O(),rules:q(),labelCol:i,wrapperCol:w}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[b()]),h&&g("span",{class:"suffix"},[R])])]})}}return()=>{let n;const{colProps:t={},colSlot:l,renderColContent:c,component:o}=e.schema;if(!J.has(o))return null;const{baseColProps:a={}}=e.formProps,i=f(f({},a),t),{isIfShow:w,isShow:I}=L(),C=r(p),b={disabled:r(k)};return w&&ae(g(U,i,B(n=(()=>l?z(s,l,C,b):c?c(C,b):v())())?n:{default:()=>[n]}),[[ce,I]])}}});export{Me as _,Re as a,Te as d,Se as h};
